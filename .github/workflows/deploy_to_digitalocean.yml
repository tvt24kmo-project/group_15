name: Deploy to digitalocean

on:
  push:
    paths:
      - "backend/**"



jobs:
  deploy:
    runs-on: self-hosted

    steps:
    - name: checkout repo
      uses: actions/checkout@v4

    - name: install nodejs dependencies
      working-directory: ./backend
      run: npm install

    - name: Restart Node.js application
      run: |
        pm2 restart backend || pm2 start backend/app.js --name backend

    - name: Restart Apache
      run: sudo systemctl restart apache2


